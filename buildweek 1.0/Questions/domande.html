<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=, initial-scale=1.0">
    <title>Document</title>

    <link rel="stylesheet" href="../css/reset.css">
    <link rel="stylesheet" href="../css/fontawesome.css">
    <link rel="stylesheet" href="../css/style.css">


</head>

<body>

    <div id="bg">
        <!--sfondo-->

        <!--header-->
        <header>

            <div id="logo">
                <img src="../assets/epicode_logo.png" alt="">
                <!--logo-->
            </div>

            <div class="chart">
                <div class="percent"></div><!--cerchio azzurro -->
                <div class="filler"></div> <!-- cerchio bianco al centro -->
            </div>

        </header>

        <!--main-->
        <main id="main-questions">

            <div class="container">

                <!--div per mostrare la domanda la domanda-->
                <div id="question">
                    <h1 class="font-title"></h1>
                </div>

                <!--div per mostrare le risposte, provisorio(da fare in js)-->
                <div id="container-answers">
                </div>

            </div>

        </main>


        <!--footer-->
        <footer>

            <div id="recap">
                <p>QUESTION <span class="domanda"></span> <span>/10</span></p>
                <!--il numero andra fornito con js-->
            </div>

        </footer>
    </div>

    <script>
        var timer;
        var max = 60; //secondi del timer
        var percentage = max;
        var dialColor = "#DFE8ED";
        var percColor = "#transparent";

        function setPercentage(percentage) {
            var element = document.createElement('style');
            element.innerHTML = '.percent:before {';

            if (percentage > 0.5) {
                document.getElementsByClassName("chart")[0].style.backgroundColor = percColor;
                element.innerHTML += 'background-color: ' + dialColor + ';';
                element.innerHTML += 'transform:rotate(' + (180 - (percentage - 0.5) * 360) + 'deg);';
                document.getElementsByClassName("percent")[0].style.transform = "rotate(" + (-180 + (percentage - 0.5) * 360) + "deg(";
            } else {
                document.getElementsByClassName("chart")[0].style.backgroundColor = dialColor;
                element.innerHTML += 'background-color: ' + percColor +';';
                element.innerHTML += 'transform:rotate(' + (180 - (percentage - 0.5) * 360) + 'deg);';
                document.getElementsByClassName("percent")[0].style.transform = "rotate(180deg)";
            }

            element.innerHTML += '}';
            document.getElementsByTagName('head')[0].appendChild(element);
        }

        function updatePercentage() {
            percentage -= 0.1;
            if (percentage <= 0) {
                clearInterval(timer);
            }
            setPercentage(percentage / max > 0 ? percentage / max : 0);
            document.getElementsByClassName("filler")[0].innerHTML = Math.ceil(percentage) + " s";
        }

        function init() {
            timer = setInterval(updatePercentage, 100);
        }

        init();
    </script>
    <script type="text/javascript" src="script_question.js"></script>
</body>

</html>